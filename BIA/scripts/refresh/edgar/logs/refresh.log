
Running Pre Refresh script...
Stack  edgar-stack  Instance   edgar-replica   ConnString  edgar-replica   Password  Q4!Iro9l8B^6#5YIMa
Begin Stack deletion of:  edgar-stack  at  Tue Jul 26 23:24:00 UTC 2022
aws cloudformation delete-stack --stack-name edgar-stack
Monitor Stack Deletion of:  edgar-stack   Tue Jul 26 23:25:01 UTC 2022
aws cloudformation wait stack-delete-complete --stack-name edgar-stack
edgar-stack  has been deleted.  Tue Jul 26 23:28:35 UTC 2022
Launch Cloud Formation Template for:  edgar-stack   Tue Jul 26 23:28:35 UTC 2022
aws cloudformation create-stack --stack-name edgar-stack --template-url https://bip-bpds-prodtest.s3-us-gov-west-1.amazonaws.com/upload/edgarprod.yml
{
    "StackId": "arn:aws-us-gov:cloudformation:us-gov-west-1:532813628429:stack/edgar-stack/abf33360-0d3a-11ed-8880-06677acc2dae"
}
Monitor Stack Creation.  Tue Jul 26 23:29:36 UTC 2022
aws cloudformation wait stack-create-complete --stack-name edgar-stack
If Stack is Still Creating, issue wait -stack-create-complete command again.  Wed Jul 27 00:08:58 UTC 2022
Else, echo Create Complete. 
Stack Creation is Complete.  Wed Jul 27 00:08:59 UTC 2022
Promote Instance :  edgar-replica   Wed Jul 27 00:09:59 UTC 2022
First, Wait for Instance Available.
aws rds wait db-instance-available --db-instance-identifier edgar-replica
Instance:  edgar-replica  Is Available.  Wed Jul 27 00:10:01 UTC 2022
Promote Read Replica Instance:  edgar-replica   Wed Jul 27 00:10:01 UTC 2022
aws rds promote-read-replica --db-instance-identifier edgar-replica
{
    "DBInstance": {
        "DBInstanceIdentifier": "edgar-replica",
        "DBInstanceClass": "db.t3.medium",
        "Engine": "oracle-ee",
        "DBInstanceStatus": "available",
        "MasterUsername": "dbadmin",
        "DBName": "ORCL",
        "Endpoint": {
            "Address": "edgar-replica.cetxxdbd6our.us-gov-west-1.rds.amazonaws.com",
            "Port": 1521,
            "HostedZoneId": "Z2YROVNTF0QJSQ"
        },
        "AllocatedStorage": 100,
        "InstanceCreateTime": "2022-07-26T23:47:32.088000+00:00",
        "PreferredBackupWindow": "10:12-10:42",
        "BackupRetentionPeriod": 0,
        "DBSecurityGroups": [],
        "VpcSecurityGroups": [
            {
                "VpcSecurityGroupId": "sg-04fa0c62",
                "Status": "active"
            },
            {
                "VpcSecurityGroupId": "sg-00ae03949eb7c2775",
                "Status": "active"
            }
        ],
        "DBParameterGroups": [
            {
                "DBParameterGroupName": "bip-dba-oracle-ee-19-pa",
                "ParameterApplyStatus": "in-sync"
            }
        ],
        "AvailabilityZone": "us-gov-west-1a",
        "DBSubnetGroup": {
            "DBSubnetGroupName": "db-subnet-prod-gp-app-prod-a",
            "DBSubnetGroupDescription": "Security Group for Application Database in Prod A VPC",
            "VpcId": "vpc-5e3ae53a",
            "SubnetGroupStatus": "Complete",
            "Subnets": [
                {
                    "SubnetIdentifier": "subnet-b8caacdc",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1a"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                },
                {
                    "SubnetIdentifier": "subnet-8508cfdc",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1c"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                },
                {
                    "SubnetIdentifier": "subnet-73c7a205",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1b"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                }
            ]
        },
        "PreferredMaintenanceWindow": "sat:06:00-sat:06:30",
        "PendingModifiedValues": {
            "BackupRetentionPeriod": 1
        },
        "MultiAZ": false,
        "EngineVersion": "19.0.0.0.ru-2021-10.rur-2021-10.r1",
        "AutoMinorVersionUpgrade": false,
        "ReadReplicaSourceDBInstanceIdentifier": "edgar-test",
        "ReadReplicaDBInstanceIdentifiers": [],
        "ReplicaMode": "open-read-only",
        "LicenseModel": "bring-your-own-license",
        "OptionGroupMemberships": [
            {
                "OptionGroupName": "bip-dba-oracle-ee-19-pa-rpt",
                "Status": "in-sync"
            }
        ],
        "CharacterSetName": "AL32UTF8",
        "NcharCharacterSetName": "AL16UTF16",
        "PubliclyAccessible": false,
        "StatusInfos": [
            {
                "StatusType": "read replication",
                "Normal": true,
                "Status": "replicating"
            }
        ],
        "StorageType": "gp2",
        "DbInstancePort": 0,
        "StorageEncrypted": true,
        "KmsKeyId": "arn:aws-us-gov:kms:us-gov-west-1:532813628429:key/70921ec6-915e-4cfe-bf33-323e6bcc5ab0",
        "DbiResourceId": "db-P4FAMJH27TZYRYJHBM3E37MHII",
        "CACertificateIdentifier": "rds-ca-rsa4096-g1",
        "DomainMemberships": [],
        "CopyTagsToSnapshot": false,
        "MonitoringInterval": 0,
        "DBInstanceArn": "arn:aws-us-gov:rds:us-gov-west-1:532813628429:db:edgar-replica",
        "IAMDatabaseAuthenticationEnabled": false,
        "PerformanceInsightsEnabled": false,
        "DeletionProtection": false,
        "AssociatedRoles": [
            {
                "RoleArn": "arn:aws-us-gov:iam::532813628429:role/project/project-rds-enhanced-monitoring-role2",
                "FeatureName": "S3_INTEGRATION",
                "Status": "ACTIVE"
            }
        ],
        "TagList": [
            {
                "Key": "aws:cloudformation:stack-name",
                "Value": "edgar-stack"
            },
            {
                "Key": "Tenant",
                "Value": "patrick"
            },
            {
                "Key": "aws:cloudformation:stack-id",
                "Value": "arn:aws-us-gov:cloudformation:us-gov-west-1:532813628429:stack/edgar-stack/abf33360-0d3a-11ed-8880-06677acc2dae"
            },
            {
                "Key": "Portfolio",
                "Value": "BAM"
            },
            {
                "Key": "Product",
                "Value": "BIP Platform"
            },
            {
                "Key": "aws:cloudformation:logical-id",
                "Value": "RDSDatabase"
            },
            {
                "Key": "ApplicationID",
                "Value": "patrick"
            },
            {
                "Key": "ProductLine",
                "Value": "BIA"
            }
        ],
        "CustomerOwnedIpEnabled": false
    }
}
Monitor Instance Promotion of:  edgar-replica   Wed Jul 27 00:11:02 UTC 2022
aws rds wait db-instance-available --db-instance-identifier edgar-replica
if Instance is Still Not Available, Repeat Monitor.  Wed Jul 27 00:39:14 UTC 2022
Else, if Instance Available, echo Promotion Complete.
Stack Promotion is Complete for:  edgar-stack   Wed Jul 27 00:39:15 UTC 2022
Check Database Status.  Wed Jul 27 00:39:15 UTC 2022
Database Status is Open.
Database Refresh Complete for:  edgar-stack   Wed Jul 27 00:39:15 UTC 2022

Running Post Refresh script...
Pushing OEM Agent to Resync...

Running Pre Refresh script...
Stack  edgar-stack  Instance   edgar-replica   ConnString  edgar-replica   Password  Q4!Iro9l8B^6#5YIMa
Begin Stack deletion of:  edgar-stack  at  Wed Jul 27 18:19:11 UTC 2022
aws cloudformation delete-stack --stack-name edgar-stack
Monitor Stack Deletion of:  edgar-stack   Wed Jul 27 18:20:12 UTC 2022
aws cloudformation wait stack-delete-complete --stack-name edgar-stack
edgar-stack  has been deleted.  Wed Jul 27 18:23:46 UTC 2022
Launch Cloud Formation Template for:  edgar-stack   Wed Jul 27 18:23:46 UTC 2022
aws cloudformation create-stack --stack-name edgar-stack --template-url https://bip-bpds-prodtest.s3-us-gov-west-1.amazonaws.com/upload/edgarprod.yml
{
    "StackId": "arn:aws-us-gov:cloudformation:us-gov-west-1:532813628429:stack/edgar-stack/41359b90-0dd9-11ed-867e-060098f3fce2"
}
Monitor Stack Creation.  Wed Jul 27 18:24:47 UTC 2022
aws cloudformation wait stack-create-complete --stack-name edgar-stack
If Stack is Still Creating, issue wait -stack-create-complete command again.  Wed Jul 27 18:59:36 UTC 2022
Else, echo Create Complete. 
Stack Creation is Complete.  Wed Jul 27 18:59:37 UTC 2022
Promote Instance :  edgar-replica   Wed Jul 27 19:00:37 UTC 2022
First, Wait for Instance Available.
aws rds wait db-instance-available --db-instance-identifier edgar-replica
Instance:  edgar-replica  Is Available.  Wed Jul 27 19:00:39 UTC 2022
Promote Read Replica Instance:  edgar-replica   Wed Jul 27 19:00:39 UTC 2022
aws rds promote-read-replica --db-instance-identifier edgar-replica
{
    "DBInstance": {
        "DBInstanceIdentifier": "edgar-replica",
        "DBInstanceClass": "db.t3.medium",
        "Engine": "oracle-ee",
        "DBInstanceStatus": "available",
        "MasterUsername": "dbadmin",
        "DBName": "ORCL",
        "Endpoint": {
            "Address": "edgar-replica.cetxxdbd6our.us-gov-west-1.rds.amazonaws.com",
            "Port": 1521,
            "HostedZoneId": "Z2YROVNTF0QJSQ"
        },
        "AllocatedStorage": 100,
        "InstanceCreateTime": "2022-07-27T18:40:11.168000+00:00",
        "PreferredBackupWindow": "13:03-13:33",
        "BackupRetentionPeriod": 0,
        "DBSecurityGroups": [],
        "VpcSecurityGroups": [
            {
                "VpcSecurityGroupId": "sg-04fa0c62",
                "Status": "active"
            },
            {
                "VpcSecurityGroupId": "sg-00ae03949eb7c2775",
                "Status": "active"
            }
        ],
        "DBParameterGroups": [
            {
                "DBParameterGroupName": "bip-dba-oracle-ee-19-pa",
                "ParameterApplyStatus": "in-sync"
            }
        ],
        "AvailabilityZone": "us-gov-west-1c",
        "DBSubnetGroup": {
            "DBSubnetGroupName": "db-subnet-prod-gp-app-prod-a",
            "DBSubnetGroupDescription": "Security Group for Application Database in Prod A VPC",
            "VpcId": "vpc-5e3ae53a",
            "SubnetGroupStatus": "Complete",
            "Subnets": [
                {
                    "SubnetIdentifier": "subnet-b8caacdc",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1a"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                },
                {
                    "SubnetIdentifier": "subnet-8508cfdc",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1c"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                },
                {
                    "SubnetIdentifier": "subnet-73c7a205",
                    "SubnetAvailabilityZone": {
                        "Name": "us-gov-west-1b"
                    },
                    "SubnetOutpost": {},
                    "SubnetStatus": "Active"
                }
            ]
        },
        "PreferredMaintenanceWindow": "sat:06:00-sat:06:30",
        "PendingModifiedValues": {
            "BackupRetentionPeriod": 1
        },
        "MultiAZ": false,
        "EngineVersion": "19.0.0.0.ru-2022-01.rur-2022-01.r1",
        "AutoMinorVersionUpgrade": false,
        "ReadReplicaSourceDBInstanceIdentifier": "edgar-test",
        "ReadReplicaDBInstanceIdentifiers": [],
        "ReplicaMode": "open-read-only",
        "LicenseModel": "bring-your-own-license",
        "OptionGroupMemberships": [
            {
                "OptionGroupName": "bip-dba-oracle-ee-19-pa-rpt",
                "Status": "in-sync"
            }
        ],
        "CharacterSetName": "AL32UTF8",
        "NcharCharacterSetName": "AL16UTF16",
        "PubliclyAccessible": false,
        "StatusInfos": [
            {
                "StatusType": "read replication",
                "Normal": true,
                "Status": "replicating"
            }
        ],
        "StorageType": "gp2",
        "DbInstancePort": 0,
        "StorageEncrypted": true,
        "KmsKeyId": "arn:aws-us-gov:kms:us-gov-west-1:532813628429:key/70921ec6-915e-4cfe-bf33-323e6bcc5ab0",
        "DbiResourceId": "db-CVT6FPWIADEINLWZBEUWA7K3OM",
        "CACertificateIdentifier": "rds-ca-rsa4096-g1",
        "DomainMemberships": [],
        "CopyTagsToSnapshot": false,
        "MonitoringInterval": 0,
        "DBInstanceArn": "arn:aws-us-gov:rds:us-gov-west-1:532813628429:db:edgar-replica",
        "IAMDatabaseAuthenticationEnabled": false,
        "PerformanceInsightsEnabled": false,
        "DeletionProtection": false,
        "AssociatedRoles": [
            {
                "RoleArn": "arn:aws-us-gov:iam::532813628429:role/project/project-rds-enhanced-monitoring-role2",
                "FeatureName": "S3_INTEGRATION",
                "Status": "ACTIVE"
            }
        ],
        "TagList": [
            {
                "Key": "aws:cloudformation:stack-name",
                "Value": "edgar-stack"
            },
            {
                "Key": "Tenant",
                "Value": "patrick"
            },
            {
                "Key": "aws:cloudformation:stack-id",
                "Value": "arn:aws-us-gov:cloudformation:us-gov-west-1:532813628429:stack/edgar-stack/41359b90-0dd9-11ed-867e-060098f3fce2"
            },
            {
                "Key": "Portfolio",
                "Value": "BAM"
            },
            {
                "Key": "Product",
                "Value": "BIP Platform"
            },
            {
                "Key": "aws:cloudformation:logical-id",
                "Value": "RDSDatabase"
            },
            {
                "Key": "ApplicationID",
                "Value": "patrick"
            },
            {
                "Key": "ProductLine",
                "Value": "BIA"
            }
        ],
        "CustomerOwnedIpEnabled": false
    }
}
Monitor Instance Promotion of:  edgar-replica   Wed Jul 27 19:01:41 UTC 2022
aws rds wait db-instance-available --db-instance-identifier edgar-replica
if Instance is Still Not Available, Repeat Monitor.  Wed Jul 27 19:12:16 UTC 2022
Else, if Instance Available, echo Promotion Complete.
Stack Promotion is Complete for:  edgar-stack   Wed Jul 27 19:12:17 UTC 2022
Check Database Status.  Wed Jul 27 19:12:17 UTC 2022
Database Status is Open.
Database Refresh Complete for:  edgar-stack   Wed Jul 27 19:12:17 UTC 2022

Running Post Refresh script...
Pushing OEM Agent to Resync...
